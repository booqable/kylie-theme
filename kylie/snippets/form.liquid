{{ "form.css" | asset_url | stylesheet_tag }}

<style>
  .form__field, .form__textarea, .form__field::placeholder, .form__textarea::placeholder {
    font-family: {{ settings.body_font.family }}, {{ settings.body_font.fallback_families }};
  }

  .bq-button--{{ section.key }} {
    background-color: var(--color-accent-background);
    color: var(--color-accent-foreground);
  }

  {% if section.settings.button_color != blank %}
    .bq-button--{{ section.key }} {
      background-color: {{ section.settings.button_color }};
    }
  {% endif %}

  {% if section.settings.button_label_color != blank %}
    .bq-button--{{ section.key }} {
      color: {{ section.settings.button_label_color }};
    }
  {% endif %}
</style>

<script>
  function onSubmit(token) {
    const form = document.querySelector('#{{ section.key }} form');
    const fields = form.querySelectorAll('input, textarea');

    fields.forEach(function(field) {
      if (field.name === 'form[type]') return

      field.name = `form[${field.name}]`;
    });

    form.submit();
  };
</script>

<div id="{{ section.key }}" class="form__inner">
  <h2 class="form__title">{{ section.settings.title }}</h2>
  {% form 'contact' %}
    <div class="form__sender-name">
      <label class="form__label" for="name">{{ section.settings.name_label }}</label>
      <input id="name" name="author" title="{{ section.settings.name_label }}" class="form__field {% if form.errors.author %}error{% endif %}" type="text" placeholder="{{ section.settings.name_placeholder | append: ' *'  }}">
      {% if form.errors.author %}
        <p class="form__error">{{ form.errors.author }}</p>
      {% endif %}
    </div>
    <div class="form__sender-email">
      <label class="form__label" for="email">{{ section.settings.email_label }}</label>
      <input type="email" name="email" title="{{ section.settings.email_label }}" class="form__field {% if form.errors.email %}error{% endif %}" placeholder="{{ section.settings.email_placeholder | append: ' *'  }}">
      {% if form.errors.email %}
        <p class="form__error">{{ form.errors.email }}</p>
      {% endif %}
    </div>
    <div class="form__message">
      <label class="form__label" for="message">{{ section.settings.message_label }}</label>
      <textarea id="message" name="body" title="{{ section.settings.message_label }}" class="form__textarea {% if form.errors.message %}error{% endif %}" rows="5"></textarea>
      {% if form.errors.message %}
        <p class="form__error">{{ form.errors.message }}</p>
      {% endif %}
    </div>
    {% if form.posted_successfully %}
      Your form posted successfully
    {% endif %}
    <div class="form__submit">
      <button
        class="g-recaptcha bq-button bq-button--size-lg bq-button--solid bq-button--{{ section.key }}"
        data-sitekey="6Le5IfYiAAAAABxzCgFGGxw3_fLo8-99otZn_NlQ"
        data-callback="onSubmit"
        data-action="submit"
      >
        {{ section.settings.button_label }}
      </button>
    </div>
  {% endform %}
</div>